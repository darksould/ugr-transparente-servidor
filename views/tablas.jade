//
	UGR Transparente. Sitio Web de la Universidad de Granada de acceso a Datos Abiertos.
	Copyright (C) 2016 Andrés Ortiz Corrales

	This file is part of UGR Transparente.

	UGR Transparente is free software: you can redistribute it and/or modify
	it under the terms of the GNU General Public License as published by
	the Free Software Foundation, either version 3 of the License, or
	(at your option) any later version.

	UGR Transparente is distributed in the hope that it will be useful,
	but WITHOUT ANY WARRANTY; without even the implied warranty of
	MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
	GNU General Public License for more details.

	You should have received a copy of the GNU General Public License
	along with this program. If not, see <http://www.gnu.org/licenses/>.


mixin table1 (valor,datos)
	h1
		a(id="#{valor.link}", name="__doku_encabezado_de_primer_nivel") #{valor.encabezado}
	.level1
		p #{valor.texto}
		table.inline
			colgroup
				col(span='1', style='width: 90%;')
				col(span='1', style='width: 10%;')
			tbody
				tr
					th.centeralign Descripción
					th.centeralign Datos en Opendata
					th.centeralign Ver
					th.centeralign Descargar
				each elemento in datos
					if elemento.dataset==valor.encabezado
						tr
							td(class="centeralign par") #{elemento.nombre}
							td(class="centeralign impar")
								a(href="#{servidor}dataset/#{elemento.id_dataset}/resource/#{elemento.url}",target="_blank")
									img(class="link",src="/imagenes/link.png", alt="link")
							td(class="centeralign par")
								a(href="#dialog" class="view" rel="#{servidor}dataset/#{elemento.descarga}" name="#{elemento.nombre}")
									img(class="view",src="/imagenes/view.png", alt="view")
							td(class="centeralign impar")
								a(href="#{servidor}dataset/#{elemento.descarga}")
									img(class="save",src="/imagenes/save.png", alt="save")

mixin table2 (valor,datos)
	h1
		a(id="#{valor.link}", name="__doku_encabezado_de_primer_nivel") #{valor.encabezado}
	.level1
		p #{valor.texto}
		table.inline
			colgroup
				col(span='1', style='width: 90%;')
				col(span='1', style='width: 10%;')
			tbody
				tr
					th.centeralign Descripción
					th.centeralign Enlace
				each elemento in datos
					if elemento.dataset==valor.encabezado
						tr
							td(class="centeralign par") #{elemento.nombre}
							td(class="centeralign impar")
								a(href="#{elemento.url}",target="_blank")
									img(class="link",src="/imagenes/link2.png", alt="link")


mixin table3 (valor,datos)
	h1
		a(id="#{valor.link}", name="__doku_encabezado_de_primer_nivel") #{valor.encabezado}
	.level1
		p #{valor.texto}
		table.inline
			colgroup
				col(span='1', style='width: 90%;')
				col(span='1', style='width: 10%;')
			tbody
				tr
					th.centeralign Descripción
					th.centeralign Ver
					th.centeralign Descargar
				each elemento in datos
					if elemento.dataset==valor.encabezado
						tr
							td(class="centeralign par") #{elemento.nombre}
							td(class="centeralign impar")
								a(href="static/doc/#{elemento.url}",target="_blank")
									img(class="view",src="/imagenes/pdf.png", alt="view")
							td(class="centeralign par")
								a(href="static/doc/#{elemento.url}", download="")
									img(class="save",src="/imagenes/flecha.png", alt="save")


mixin table4 (valor,datos)
	h1
		a(id="#{valor.link}", name="__doku_encabezado_de_primer_nivel") #{valor.encabezado}
	.level1
		p #{valor.texto}
		table.inline
			colgroup
				col(span='1', style='width: 90%;')
				col(span='1', style='width: 10%;')
			tbody
				tr
					th.centeralign Descripción
					th.centeralign Ver
					th.centeralign Descargar
				each elemento in datos
					if elemento.dataset==valor.encabezado
						tr
							td(class="centeralign par") #{elemento.nombre}
							td(class="centeralign impar")
								a(href="static/graph/#{elemento.url}", data-lightbox="image-1", data-title="#{elemento.nombre}")
									img(class="view",src="/imagenes/grafico.png", alt="view")
							td(class="centeralign par")
								a(href="static/graph/#{elemento.url}", download="")
									img(class="save",src="/imagenes/flecha.png", alt="save")


mixin generar_tablas (contenido,datos)
	each valor in contenido
		case valor.tipo
			when 1
				+ table1(valor,datos)
			when 2
				+ table2(valor,datos)
			when 3
				+ table3(valor,datos)
			when 4
				+ table4(valor,datos)
